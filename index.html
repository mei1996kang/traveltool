<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 Kansai Handbook</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* å¼·åˆ¶ä¿®æ­£ Flex ä½ˆå±€ä¸‹çš„æ–‡å­—æº¢å‡ºå•é¡Œ */
		.content-side {
			min-width: 0; /* è®“ Flex å­å…ƒç´ å¯ä»¥ç¸®å° */
		}

		.content-side p, .content-side h4 {
			white-space: normal !important; /* ç¢ºä¿ä¸ä½¿ç”¨ nowrap */
			word-break: break-all;         /* é‡å°æ²’æœ‰ç©ºæ ¼çš„é•·å­—ä¸²å¼·åˆ¶æ–·è¡Œ */
			overflow-wrap: break-word;     /* é‡å°ä¸€èˆ¬æ–‡å­—æ–·è¡Œ */
		}

		/* ç¢ºä¿æ•´å€‹é é¢å®¹å™¨ä¸å…è¨±æ°´å¹³æº¢å‡º */
		body, html {
			overflow-x: hidden;
			width: 100%;
		}
		:root { --bg: #fcfaf7; --main: #2a2a2a; --blue: #1a2a6c; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: var(--bg); color: var(--main); line-height: 1.6; font-size: 16px; }
        .serif { font-family: 'Playfair Display', serif; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .timeline-item { position: relative; display: flex; padding-bottom: 2.5rem; cursor: pointer; }
        .time-side { width: 70px; flex-shrink: 0; text-align: right; padding-right: 15px; font-size: 1.3rem; font-weight: 700; position: relative; color: #111; }
        .time-side::after { content: ''; position: absolute; right: -1px; top: 12px; width: 8px; height: 8px; background: white; border: 1px solid #ccc; border-radius: 50%; z-index: 10; }
        .timeline-line { position: absolute; left: 69.5px; top: 12px; bottom: 0; width: 1px; background: #eee; }
        .content-side { flex: 1; padding-left: 15px; }
        .modal { display: none; position: fixed; z-index: 3000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.75); backdrop-filter: blur(8px); }
        .modal-content { background: white; margin: 5vh auto; width: 92%; max-width: 450px; border-radius: 24px; position: relative; max-height: 85vh; overflow-y: auto; box-shadow: 0 25px 50px rgba(0,0,0,0.3); }
        .nav-active { color: var(--blue) !important; font-weight: 700; }
        .day-btn.active { color: #111; font-weight: 700; border-bottom: 3px solid #111; }
        .purchased-item { opacity: 0.5; filter: grayscale(1); }
        .weather-hour { min-width: 55px; flex-shrink: 0; }
        .truncate-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
    </style>
</head>
<body class="pb-24">

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-white z-[4000] flex items-center justify-center">
        <div class="text-center">
            <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-900 mx-auto"></div>
            <p class="mt-4 text-[10px] text-gray-400 tracking-widest uppercase">Initializing...</p>
        </div>
    </div>

    <header class="p-8 text-center">
        <div class="text-[10px] text-gray-400 tracking-[0.4em] mb-2 font-light uppercase">Osaka Handbook</div>
        <h1 class="text-xl font-bold tracking-widest serif">å¤§é˜ª â— äº¬éƒ½ â— å…µåº«</h1>
    </header>

    <div id="infoModal" class="modal" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="absolute top-4 right-4 text-white bg-black/40 w-10 h-10 rounded-full z-10" onclick="closeModal()"><i class="fas fa-times"></i></button>
            <div id="modal-image" class="w-full h-52 bg-cover bg-center"></div>
            <div class="p-8 space-y-4" id="modal-body"></div>
        </div>
    </div>

    <!-- 1. PLAN -->
    <div id="itinerary" class="tab-content active px-6">
        <div class="flex justify-between mb-8 overflow-x-auto hide-scrollbar space-x-6 px-2 text-gray-300">
            <button onclick="showDay(1)" class="day-btn pb-1 min-w-fit"><span class="text-[10px] block font-bold">MON</span><span class="text-xl serif">2/2</span></button>
            <button onclick="showDay(2)" class="day-btn pb-1 min-w-fit"><span class="text-[10px] block font-bold">TUE</span><span class="text-xl serif">2/3</span></button>
            <button onclick="showDay(3)" class="day-btn pb-1 min-w-fit"><span class="text-[10px] block font-bold">WED</span><span class="text-xl serif">2/4</span></button>
            <button onclick="showDay(4)" class="day-btn pb-1 min-w-fit"><span class="text-[10px] block font-bold">THU</span><span class="text-xl serif">2/5</span></button>
            <button onclick="showDay(5)" class="day-btn pb-1 min-w-fit"><span class="text-[10px] block font-bold">FRI</span><span class="text-xl serif">2/6</span></button>
        </div>
        <div id="weather-section" class="mb-10 p-5 bg-white border border-gray-100 rounded-2xl shadow-sm">
            <div id="weather-city" class="text-[10px] font-bold tracking-widest text-gray-400 uppercase mb-4 text-center">Hourly Weather</div>
            <div id="hourly-weather" class="flex space-x-2 overflow-x-auto hide-scrollbar"></div>
        </div>
        <div id="day-content" class="relative"></div>
    </div>

    <!-- 2. SHOP -->
    <div id="shopping" class="tab-content p-6">
        <div class="bg-white p-6 rounded-3xl border border-gray-100 mb-6 text-sm">
            <div class="space-y-4">
                <input type="text" id="shop-name" placeholder="å•†å“åç¨±" class="w-full border-b py-2 outline-none text-base font-bold">
                <div class="grid grid-cols-2 gap-4">
                    <input type="text" id="shop-spec" placeholder="è¦æ ¼" class="w-full border-b py-2 outline-none">
                    <input type="number" id="shop-qty" placeholder="æ•¸é‡" class="w-full border-b py-2 outline-none">
                </div>
                <input type="text" id="shop-loc" placeholder="ä»£è³¼å ´æ‰€" class="w-full border-b py-2 outline-none">
                <input type="text" id="shop-purchaser" placeholder="è³¼è²·è€…" class="w-full border-b py-2 outline-none">
                <!-- æ–°å¢å‚™è¨»æ¬„ä½ -->
                <textarea id="shop-remark" placeholder="å‚™è¨»ç´°ç¯€ (ä¾‹å¦‚é¡è‰²ã€å£å‘³è¦æ±‚)" class="w-full border-b py-2 outline-none h-12 text-sm bg-transparent"></textarea>
                <label class="block border border-dashed border-gray-200 py-4 text-center rounded-2xl text-gray-400 text-xs cursor-pointer">
                    <span id="shop-img-status"><i class="fas fa-camera mr-2"></i>ä¸Šå‚³å•†å“åœ–ç‰‡</span>
                    <input type="file" accept="image/*" class="hidden" onchange="processImage(this)">
                </label>
                <button onclick="addShoppingItem()" class="w-full bg-black text-white py-4 rounded-full font-bold uppercase tracking-widest">Add Item</button>
            </div>
        </div>
        <div id="shop-filter-bar" class="flex space-x-2 overflow-x-auto hide-scrollbar mb-4"></div>
        <div id="shopping-list"></div>
    </div>

    <!-- 3. CASH -->
    <div id="ledger" class="tab-content p-6 text-center">
        <div id="total-amount" class="mb-8">
            <p class="text-[10px] text-gray-400 uppercase tracking-widest"><i class="fas fa-wallet mr-2"></i>Total Spend</p>
            <div class="text-5xl font-bold serif text-red-600 mt-2">Â¥<span>0</span></div>
        </div>
        <div class="bg-white p-6 rounded-3xl border text-left mb-6 text-sm">
            <input type="text" id="exp-name" placeholder="é …ç›®" class="w-full border-b py-3 mb-4 outline-none">
            <div class="grid grid-cols-2 gap-4 mb-4">
                <input type="number" id="exp-amount" placeholder="é‡‘é¡ Â¥" class="border-b py-2 outline-none font-bold">
                <select id="exp-method" class="border-b py-2 outline-none bg-transparent">
                    <option>ç¾é‡‘</option><option>åˆ·å¡</option><option>Suica</option>
                </select>
            </div>
            <input type="date" id="exp-date" class="w-full border-b py-3 mb-6 outline-none">
            <button onclick="addExpense()" class="w-full bg-black text-white py-4 rounded-full font-bold uppercase tracking-widest">Save Cash</button>
        </div>
        <div id="expense-list" class="text-left space-y-2"></div>
    </div>

    <!-- 4. DOCS -->
    <div id="tickets" class="tab-content p-6">
        <div class="bg-slate-900 text-white p-6 rounded-3xl mb-8 shadow-lg">
            <div class="flex justify-between items-center mb-6">
                <div><div class="text-xl font-bold serif">TPE</div><div class="text-[9px] opacity-40">TAIPEI</div></div>
                <i class="fas fa-plane text-indigo-400 text-xl"></i>
                <div><div class="text-xl font-bold serif">KIX</div><div class="text-[9px] opacity-40">OSAKA</div></div>
            </div>
            <div class="text-[10px] opacity-50 space-y-1">
                <p>2/2 å»ç¨‹ï¼šSTARLUX JX822 (09:20 - 12:50)</p>
                <p>2/6 å›ç¨‹ï¼šSTARLUX JX821 (12:20 - 14:35)</p>
            </div>
        </div>
        <div class="space-y-4" id="doc-list-hotels">
            <div class="bg-white p-5 rounded-2xl border flex justify-between items-center">
                <div><div class="text-sm font-bold">é›£æ³¢æ ¼åˆ©èŒ²é£¯åº— (GRIDS)</div><div class="text-[10px] text-gray-400">2/2 å…¥ä½ - 2/3 é€€æˆ¿</div></div>
                <button onclick="navigate('GRIDS PREMIUM HOTEL OSAKA NAMBA')" class="text-blue-500 bg-blue-50 p-3 rounded-full"><i class="fas fa-map-marker-alt"></i></button>
            </div>
            <div class="bg-white p-5 rounded-2xl border flex justify-between items-center">
                <div><div class="text-sm font-bold">æ¢…ç”°é¾ä»•æŸé£¯åº— (RESPIRE)</div><div class="text-[10px] text-gray-400">2/3 å…¥ä½ - 2/6 é€€æˆ¿</div></div>
                <button onclick="navigate('Hotel Hankyu RESPIRE OSAKA')" class="text-blue-500 bg-blue-50 p-3 rounded-full"><i class="fas fa-map-marker-alt"></i></button>
            </div>
        </div>
    </div>

    <!-- Navbar -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-xl border-t flex justify-around p-5 safe-area-bottom z-[2000]">
        <button onclick="switchTab('itinerary')" class="nav-btn flex flex-col items-center nav-active text-gray-300"><i class="fas fa-calendar-check text-xl"></i><span class="text-[9px] mt-1">PLAN</span></button>
        <button onclick="switchTab('shopping')" class="nav-btn flex flex-col items-center text-gray-300"><i class="fas fa-shopping-cart text-xl"></i><span class="text-[9px] mt-1">SHOP</span></button>
        <button onclick="switchTab('ledger')" class="nav-btn flex flex-col items-center text-gray-300"><i class="fas fa-wallet text-xl"></i><span class="text-[9px] mt-1">CASH</span></button>
        <button onclick="switchTab('tickets')" class="nav-btn flex flex-col items-center text-gray-300"><i class="fas fa-folder-open text-xl"></i><span class="text-[9px] mt-1">DOCS</span></button>
    </nav>

    <script>
        const GAS_URL = "https://script.google.com/macros/s/AKfycbzEv6Bda3jKfHZNoV-duexjmNT47igMmz0s_Ldm7fRyR23TH619rqp3bzYd9jXUT0yO/exec"; 

        const travelData = {
            1: { city: "Osaka", coords: {lat: 34.69, lon: 135.50}, items: [
                { t: "06:15", d: "æ©Ÿå ´æ·é‹-å°åŒ—è»Šç«™", m: "äº¤é€š", r: "æ­ä¹˜è¨ˆç¨‹è»Šå‰å¾€åŒ—è»Šè½‰æ©Ÿæ·", img: "https://www.funtime.com.tw/blog/wp-content/uploads/2017/02/117.jpg", detail: { about: "é è¨ˆ05:50æ­ä¹˜è¨ˆç¨‹è»Šå‰å¾€æ©Ÿå ´æ·é‹å°åŒ—è»Šç«™ï¼Œè½‰ä¹˜æ©Ÿå ´æ·é‹ï¼Œé è¨ˆæ­ä¹˜6:15(å¦‚æœè¶•ä¸ä¸Šå°±æ­6:30)ï¼Œ6:51ç¬¬ä¸€èˆªå»ˆä¸‹è»Š(ä¹˜è»Šæ™‚é–“ç´„36åˆ†é˜)ï¼Œåˆ°æ˜Ÿå®‡èˆªç©ºæ«ƒå°å ±åˆ°ï¼Œé †ä¾¿è©¢å•æ˜¯å¦æœ‰åŠ è³¼è²´è³“å®¤æ´»å‹•ã€‚" }},
                { t: "09:20", d: "æ˜Ÿå®‡èˆªç©º JX822 èµ·é£›", m: "äº¤é€š", r: "é£›å¾€å¤§é˜ªé—œè¥¿æ©Ÿå ´ (KIX)", img: "https://hoshinoresorts.com/jp/guide/wp-content/uploads/2025/06/KIX_5_TB.jpg", detail: { about: "æ˜Ÿå®‡èˆªç©ºæ«ƒå°å®Œæˆå ±åˆ°å¾Œï¼Œæ­ä¹˜æ©Ÿå ´é›»è»Šå‰å¾€ç¬¬äºŒèˆªå»ˆå…¥é—œï¼Œå…¥é—œå¾Œé€²å»æ˜Ÿå®‡èˆªç©ºè²´è³“å®¤<br/>è²´è³“å®¤åœ°åœ–ï¼š<a href='https://www.starlux-airlines.com/zh-TW/check-in-fly/travel-information/galactic-lounge' target='_blank' style='color:#2563eb;text-decoration:underline;'>é»æ­¤æ‰“é–‹</a>" }},
                { t: "14:00", d: "ğŸ›ï¸ è‡¨ç©ºåŸ Outlet", m: "æ™¯é»", r: "è™Ÿç¨±æ˜¯è¥¿æ—¥æœ¬æœ€å¤§çš„Outletè³¼ç‰©ä¸­å¿ƒ", map: "https://maps.app.goo.gl/ScyV1p9Va6UDRcrW8", img: "https://bobbyfun.tw/wp-content/uploads/2024/12/20241211002038_0_11ce74.jpg", detail: { about: "é—œè¥¿æœ€å¤§è¦æ¨¡ï¼Œå“ç‰Œé½Šå…¨ã€‚å¤•é™½æ¥µç¾ã€‚<br>åœ°åœ–PDFï¼š<a href='https://www.premiumoutlets.co.jp/rinku/brands/pdf/rinku.pdf' target='_blank' style='color:#2563eb;text-decoration:underline;'>é»æ­¤æ‰“é–‹</a>", buy: "é è¨ˆè³¼ç‰©å•†åº—ï¼šè¥¿æ¾å±‹ / Coleman / Crocs / Earth Music&Ecology / Onitsuka Tiger" }},
                { t: "20:30", d: "é£¯åº—ï¼šå¤§é˜ªé›£æ³¢GRIDS PREMIUMé…’åº—", m: "é£¯åº—", r: "ä½æ–¼é›£æ³¢ä½å®¿é£¯åº—", map: "https://maps.app.goo.gl/3L5dHm9utxgLAQLn6", img: "https://i1.wp.com/pix5.agoda.net/hotelimages/14675949/-1/31f018bdf67789f8fc46b79a8a4d4b05.jpg", detail: { about: "é€éklooké å®šï¼Œè¨‚å–®ç·¨è™Ÿï¼šVSU824425<br/> ä¾›æ‡‰å•†åƒè€ƒç·¨è™Ÿï¼šTL789631722<br/>å…¥ä½æ†‘è­‰è³‡æ–™ï¼š<a href='https://drive.google.com/file/d/1sSeca4Cu_KtFNq3s8Iob10yGzNjE73TC/view?usp=sharing' target='_blank' style='color:#2563eb;text-decoration:underline;'>é»æ­¤æ‰“é–‹</a>" }},
				{ t: "19:30", d: "ğŸ± æ™šé¤ï¼šå¤§èµ·æ°´ç”¢ è¿´è½‰å£½å¸ é“é “å €åº—", m: "ç¾é£Ÿ", r: "ä»¥ã€Œç”¢åœ°ç›´é€ã€çš„å¹³åƒ¹é«˜å“è³ªæµ·é®®è‘—ç¨±", map: "https://maps.app.goo.gl/Pgz2RmuSs6jBQs2m6", img: "https://www.wildwildtravel.com/image/special/8101019-1.jpg", detail: { buy: "â€¢ é»‘é®ªé­šèµ¤èº«/ä¸­è…¹<br>â€¢ ç‚™ç‡’é®­é­šè‚š<br>â€¢ æµ·è†½è»è‰¦ï¼ˆçœ‹ç•¶å¤©å“è³ªï¼‰<br>â€¢ èŒ¶ç¢—è’¸ï¼ˆæ—¥æœ¬ç‰ˆæœ¬è¶…å«©ï¼‰" }},
                { t: "22:30", d: "ğŸœ æ¶ˆå¤œï¼šä¸€è˜­æ‹‰éºµ é“é “å €æˆ–å¾¡å ‚ç­‹", m: "ç¾é£Ÿ", r: "ç¶“å…¸å¤©ç„¶è±šéª¨æ‹‰éºµï¼Œæä¾›æ‹›ç‰Œç§˜è£½è¾£é†¬", img: "https://venuslin.tw/wp-content/uploads/20180331001135_7.jpg", detail: { about: "å¤§é˜ªé“é “å €èˆ‡å¿ƒé½‹æ©‹å€åŸŸæœ‰å¤šé–“ä¸€è˜­æ‹‰éºµï¼Œæœ€ç†±é–€ç‚ºã€Œé“é “å €åº—ï¼ˆæœ¬é¤¨/åˆ¥é¤¨ï¼‰ã€ï¼Œä¸»æ‰“ç¶“å…¸è±šéª¨æ¹¯é ­ï¼Œ24å°æ™‚ç‡Ÿæ¥­ã€‚è€Œé„°è¿‘çš„ã€Œä¸€è˜­æ‹‰éºµé›£æ³¢å¾¡å ‚ç­‹åº—ã€ç‚ºå…¨çƒå”¯ä¸€ã€Œ100%ä¸ä½¿ç”¨è±¬è‚‰ã€åˆ†åº—ï¼Œä»¥é›æ¹¯æ­é…ç‰›äº”èŠ±ã€æ–¹å½¢é‡ç®±å®¹å™¨ç‚ºæœ€å¤§ç‰¹è‰²ï¼Œæ·±å—å–œæ„›ä¸åŒå£å‘³çš„éŠå®¢æ­¡è¿ã€‚ " }}
            ]},
            2: { city: "Kyoto", coords: {lat: 35.55, lon: 135.19}, items: [
                { t: "06:30", d: "å‡ºç™¼èŸ¹é“æ¨‚é“é “å €æ±åº—é›†åˆ", m: "äº¤é€š", r: "KKDAYä¸€æ—¥è¡Œç¨‹ï¼Œ7é»è¦åˆ°é›†åˆé»ã€‚", map: "https://maps.app.goo.gl/FXcLdrLeo3r2ttEU6", img: "https://douraku.co.jp/lacne/photo/upload/C7gBww7b7ExlBCgc.jpg", detail: { about: "è¡Œæå¯„æ”¾åœ¨é£¯åº—æ«ƒæª¯ï¼Œèµ°åˆ°é›†åˆé»(ç´„éœ€15åˆ†é˜è«‹ææ—©å‡ºé–€)ï¼Œè·¯ä¸Šå¯ä»¥è²·æ—©é¤å¸¶ä¸Šè»Šåƒã€‚<br/>KKDAYä¸€æ—¥è¡Œç¨‹è¨‚å–®ç·¨è™Ÿï¼š25KK268490554 <br/>æ†‘è­‰è³‡æ–™ï¼š<a href='https://drive.google.com/file/d/1lvef3jUK6nyac9V6v-UAJHQPCnEhdP7J/view?usp=sharing' target='_blank' style='color:#2563eb;text-decoration:underline;'>é»æ­¤æ‰“é–‹</a>" }},
                { t: "10:00", d: "ğŸš¢ ä¼Šæ ¹ç£éŠè¦½èˆ¹", m: "æ™¯é»", r: "æ˜¯å¾æµ·ä¸Šä¸€è¦½ç´„230é–“å‚³çµ±èˆŸå±‹çš„çµ•æ™¯ã€‚", map: "https://maps.app.goo.gl/gFF28xt9ksjHGYez9", img: "https://i0.wp.com/journey.tw/wp-content/uploads/2025/03/20250305042038_0_b1533a.jpg?", detail: { about: "ä¼Šæ ¹-æ—¥æœ¬æœ€ç¾é„‰æ‘ä¹‹ä¸€ï¼Œä¹Ÿè¢«ç¨±çˆ²æ—¥æœ¬å¨å°¼æ–¯ã€‚å®ƒç¾éº—çš„é¢¨æ™¯å’Œè±å¯Œçš„è‡ªç„¶è³‡æºè¢«åœ‹éš›é«˜åº¦èªå¯ã€‚æ˜¯ä¸–ç•Œæœ€ç¾æµ·ç£è¯ç›Ÿæˆå“¡ä¹‹ä¸€ã€‚åŒæ™‚ä¹Ÿæ˜¯æ³•åœ‹è–ç±³æ­‡çˆ¾ç£çš„å§å¦¹ç£ã€‚<br/>é¤µé£Ÿæµ·é·—æ˜¯éŠè¦½èˆ¹çš„æ¨‚è¶£ä¹‹ä¸€ã€‚åœ¨è²©è³£éƒ¨è³¼è²·é£¼æ–™ï¼Œå°‡é£¼æ–™å¾€é ­ä¸Šé«˜èˆ‰ï¼Œæµ·é·—ä¾¿ä»¥éˆæ´»çš„èº«æ‰‹é£›ä¾†å¼èµ°ï¼Œæ˜¯ä»–è™•æ²’æœ‰çš„çè²´é«”é©—ã€‚", buy: "ä¼Šæ ¹å¸ƒä¸-ä¼Šæ ¹ç£éŠè¦½èˆ¹æ—¥å‡ºç«™å…§é™å®šç”œé»ã€‚<br/>å‘äº•é…’é€ -ä¼Šæ ¹æ»¿é–‹é…’ç²•å†°æ·‡æ·‹ã€‚" }},
                { t: "11:00", d: "ğŸš  å¤©æ©‹ç«‹å‚˜æ¾å…¬åœ’", m: "æ™¯é»", r: "ä»¥ç¨ç‰¹çš„ã€Œæ˜‡é¾è§€ã€æ™¯è‰²è‘—ç¨±", map: "https://maps.app.goo.gl/EoN1RJgRTWnvNWR37", img: "https://static.gltjp.com/glt/data/article/21000/20517/20231113_151005_7a16da40_w1280.webp", detail: { about: "å¤©æ©‹ç«‹å‚˜æ¾å…¬åœ’ä½æ–¼äº¬éƒ½åºœå®®æ´¥å¸‚çš„æˆç›¸å±±ä¸­è…¹ï¼Œæ˜¯ä¿¯ç°æ—¥æœ¬ä¸‰æ™¯ã€Œå¤©æ©‹ç«‹ã€çš„è‘—åè§€æ™¯å°ï¼Œå¾æ­¤è™•å¯æ¬£è³å¤©æ©‹ç«‹æ²™æ´²åƒä¸€æ¢å·¨é¾é£›ä¸Šå¤©ç©ºçš„å£¯è§€ç•«é¢ã€‚éŠå®¢é€šå¸¸æœƒå¾å±±éº“çš„åºœä¸­ç«™æ­ä¹˜çºœè»Šæˆ–åŠæ¤…ä¸Šå±±ï¼Œä¸¦åœ¨è§€æ™¯å°é«”é©—è‘—åçš„ã€Œèƒ¯ä¸‹è§€æ™¯ã€ï¼ˆå€’è‘—çœ‹ï¼‰ï¼Œå°‡æ²™æ´²ç•¶ä½œé€£æ¥å¤©åœ°çš„æ©‹æ¨‘ã€‚ ",buy: "â— æ˜‡é¾è§€ï¼ˆShoryu-kanï¼‰ï¼šå¾æµ·æ‹”ç´„ 130 å…¬å°ºçš„å…¬åœ’åŒ—å´ä¿¯ç°ï¼Œå¤©æ©‹ç«‹æ²™æ´²å½¢ä¼¼é£›é¾ï¼Œæ°£å‹¢ç£…ç¤´ã€‚<br/>â— èƒ¯ä¸‹è§€æ™¯ç™¼ç¥¥åœ°ï¼ˆMatanozokiï¼‰ï¼šå½è…°å¾å…©è…¿ä¹‹é–“å€’çœ‹å¤©æ©‹ç«‹ï¼Œå¤©åœ°é¡›å€’ï¼Œå½·å½¿æ©‹æ¨‘æ¶åœ¨å¤©ç©ºä¸Šã€‚<br/>â— ã¤ã‚‹ã‚„é£Ÿå ‚ (Tsuruya)ï¼šä¸¹å¾Œå¯¶è—ä¸¼-é‹ªæ»¿ç•¶å­£æ–°é®®é­·é­šã€æµ·è—»ã€èºé¡çš„åœ¨åœ°ç‰¹è‰²æµ·é®®ä¸¼ã€‚<br/>â— æ™ºæƒ ä¹‹è¼ªæŠ•çŸ³ï¼šå°‡ã€Œæ™ºæ…§ç“¦ç‰‡ã€æŠ•æ“²é€²å±±å¡ä¸Šçš„åœ“å½¢éµåœˆï¼Œå‚³èªªç©¿éå³å¯æ¶ˆç½è§£å„ã€å¿ƒæƒ³äº‹æˆã€‚<br/>â— å‰ç¥¥ç‰©ï¼šå¯æ„›çš„å¨ƒå¨ƒã€ŒKasa-bouã€ï¼ˆå‚˜é†¬ï¼‰æ˜¯é€™è£¡çš„ç‰¹è‰²å½¢è±¡ã€‚ " }},
                { t: "14:45", d: "ğŸ¡ ç¾å±±èŒ…è‰å±‹ä¹‹é‡Œ", m: "æ™¯é»", r: "èˆ‡å²é˜œç¸£ç™½å·é„‰ã€ç¦å³¶ç¸£å¤§å…§å®¿ä¸¦åˆ—ç‚ºã€Œæ—¥æœ¬ä¸‰å¤§èŒ…è‘ºå±‹èšè½ã€", map: "https://maps.app.goo.gl/9qeGjH26zLkmPQJ48", img: "https://hiyori.cc/wp/wp-content/uploads/2024/01/%E7%BE%8E%E5%B1%B1%E3%81%8B%E3%82%84%E3%81%B5%E3%82%99%E3%81%8D%E3%81%AE%E9%87%8C%EF%BC%9A%E4%BA%AC%E9%83%BD%E5%90%88%E6%8E%8C%E6%9D%91%E8%87%AA%E9%A7%95%E4%B8%80%E6%97%A5%E9%81%8A%EF%BC%8C%E6%B5%AA%E6%BC%AB%E8%8C%85%E8%8D%89%E5%8F%A4%E6%B0%91%E5%AE%B6%E6%95%A3%E7%AD%96%EF%BC%86%E7%B6%93%E7%87%9F11%E5%B9%B4%E3%80%8C%E7%BE%8E%E5%8D%B5%E5%92%96%E5%95%A1%E5%BA%97%E3%80%8D%E8%87%AA%E5%AE%B6%E8%A3%BD%E7%84%A6%E7%B3%96%E5%B8%83%E4%B8%81115.jpg", detail: { about: "â— å‚³çµ±å»ºç¯‰èˆ‡é¢¨è²Œï¼š æ‘è½å…§çš„æˆ¿å­ç‚ºã€Œå…¥æ¯å±‹ã€é€ å¼æ¨£ï¼Œç‰†å£å¤šç‚ºæœ¨é€ ï¼Œæ­é…åšé‡çš„èŒ…è‰å±‹é ‚ï¼Œä¸”å®Œå…¨ä¸ç”¨ä¸€æ ¹é‡˜å­ï¼Œå…¨é å¡æ¦«èˆ‡ç²—è‰ç¹©å›ºå®šã€‚<br/>â— ä¸–å¤–æ¡ƒæºï¼š ç›¸è¼ƒæ–¼å•†æ¥­åŒ–è¼ƒé«˜çš„ç™½å·é„‰ï¼Œç¾å±±ä¿ç•™äº†æ›´å¤šçš„å¯§éœèˆ‡é„‰æ‘åŸå§‹é¢¨è²Œï¼Œè®“äººæœ‰ç©¿è¶Šæ™‚å…‰ä¹‹æ„Ÿã€‚<br/>â— å››å­£çµ•æ™¯ï¼š æ˜¥å­£æ«»èŠ±èˆ‡æ–°ç¶ ã€å¤å­£çš„ç¹¡çƒèŠ±èˆ‡å‘æ—¥è‘µã€ç§‹å­£ç´…è‘‰ï¼Œä»¥åŠå†¬å­£è¦†è“‹ç™½é›ªçš„ã€Œé›ªç‡ˆå»Šã€é»ç‡ˆæ´»å‹•ã€‚<br/>â— ç¾å±±æ°‘ä¿—è³‡æ–™é¤¨ï¼š å±•ç¤ºç•¶åœ°å‚³çµ±ç”Ÿæ´»å™¨å…·ï¼Œå¯äº†è§£éå»çš„è¾²å®¶ç”Ÿæ´»ã€‚<br/>â— ç´…è‰²éƒµç­’ï¼š æ‘å£çš„ç¶“å…¸æ‹ç…§åœ°ï¼Œå¸¶æœ‰æ‡·èˆŠæ°£æ¯ã€‚<br/>â— è—æŸ“å·¥åŠï¼š å¯æ¬£è³ç²¾ç·»çš„çµæŸ“ä½œå“ã€‚", buy: "â—<a href='https://maps.app.goo.gl/qm3ebKhTwkn2sKc89' target='_blank' style='color:#2563eb;text-decoration:underline;'>CafÃ©ç¾åµ</a>-è‡ªå®¶è£½ç„¦ç³–å¸ƒä¸ã€é»‘è±†å†°æ·‡æ·‹ã€ç†±ç‰›å¥¶ã€‚" }},
                { t: "17:45", d: "è¿”æŠµèŸ¹é“æ¨‚é“é “å €æ±åº—", m: "äº¤é€š", r: "å›åˆ°å¤§é˜ªå¸‚å€ï¼Œå…ˆåƒæ™šé¤å¾Œå›é£¯åº—é ˜å–è¡Œæ", img: "https://douraku.co.jp/lacne/photo/upload/C7gBww7b7ExlBCgc.jpg", detail: { about: "å¦‚æœè¦é€›å¿ƒé½‹æ©‹ï¼Œå…ˆåƒæ™šé¤åœ¨å»é ˜è¡Œæè¿”å›æ¢…ç”°ã€‚" }},
                { t: "18:00", d: "ğŸ± æ™šé¤ï¼šç¦å¤ªéƒå¤§é˜ªç‡’", m: "äº¤é€š", r: "ä¸»æ‰“å£æ„Ÿå¤–é…¥å…§è»Ÿçš„ã€Œå‚³çµ±å¤§é˜ªç‡’ã€èˆ‡é‹ªæ»¿é®®è”¥çš„ã€Œè”¥ç‡’ï¼ˆNegiyakiï¼‰ã€", map: "https://maps.app.goo.gl/yi3DiBYQuMvNCfCc9", img: "https://i0.wp.com/nigi33.tw/wp-content/uploads/pixnet/ec078d40d8a9d8a9da9b24defd4d434f.jpg?", detail: { about: "å¦‚æœå¤ªå¤šäººå¯ä»¥æ”¹åˆ°day4æ¢…ç”°åˆ†åº—åƒ",buy:"â— æ‹›ç‰Œè±¬è‚‰è”¥ç‡’ (è±šã­ãç„¼)ï¼š ä½¿ç”¨å¤§é‡é’è”¥ã€é¹¿å…’å³¶è±¬è‚‰ï¼Œé†¬æ²¹é¢¨å‘³æ¸…çˆ½ï¼Œå£æ„Ÿå¤–å¾®è„†å…§è»Ÿã€‚<br/>â— éº»ç³¬èµ·å¸ç‡’ (ã‚‚ã¡ãƒãƒ¼ã‚ºç„¼)ï¼š ç¶œåˆäº†èµ·å¸çš„æ¿ƒéƒèˆ‡éº»ç³¬çš„Qå½ˆï¼Œéå¸¸å—åˆ°æ­¡è¿ã€‚<br/>â— ç¶œåˆå¤§é˜ªç‡’ (ãƒˆãƒªãƒ—ãƒ«ç‰ç„¼)ï¼š å…§å«è±¬è‚‰ã€è¦å­ã€é­·é­šï¼Œé…æ–™è±å¯Œã€‚<br/>â— æ‹›ç‰Œç‚’éºµ (ç„¼ãã°)ï¼š ç²—éºµQå½ˆï¼Œé†¬æ±å…¥å‘³ï¼Œè¢«èªç‚ºæ˜¯ã€Œè¢«å¤§é˜ªç‡’è€½èª¤çš„ç‚’éºµã€ã€‚<br/>â— å…©äººé»ä¸€ä»½å¤§é˜ªç‡’+ä¸€ä»½ç‚’éºµè¼ƒç‚ºå‰›å¥½ï¼Œä»¥å…å¤ªè†©ã€‚  " }},
				{ t: "20:30", d: "é£¯åº—ï¼šHotel Hankyu RESPIRE OSAKA", m: "é£¯åº—", r: "ä½æ–¼æ¢…ç”°ä½å®¿é£¯åº—", map: "https://maps.app.goo.gl/2T1TyQL7fXr3VW866", img: "https://www.taiwanhot.net/cache/727599/lg/wp-content-uploads-2019-07-5d25f5e001c84.jpg", detail: { about: "ä½æ–¼å¤§é˜ªæ¢…ç”°æ ¸å¿ƒåœ°å¸¶ï¼ˆå‹éƒ½å…«å–œæ¢…ç”°å¡”å…§ï¼‰ï¼Œæ–¼ 2019 å¹´é–‹å¹•ï¼Œäº¤é€šç›´çµ JR å¤§é˜ªç«™èˆ‡åœ°éµï¼Œä¸»æ‰“é«˜å±¤æ™¯è§€æˆ¿ã€ä¹¾æ¿•åˆ†é›¢è¡›æµ´åŠç¾ä»£åŒ–è¨­æ–½ï¼Œæ˜¯äº¤é€šã€è³¼ç‰©èˆ‡èˆ’é©ä½å®¿å…¼å…·çš„ç†±é–€ 4.5 æ˜Ÿç´šä½å®¿é¸æ“‡ã€‚ " }}
            ]},
            3: { city: "Kyoto", coords: {lat: 35.01, lon: 135.76}, items: [
                { t: "09:00", d: "æ¢…ç”°", m: "æ™¯é»", r: "æ¢…ç”°ç™¾è²¨å…¬å¸é€›è¡—", img: "https://img.enjoy-osaka-kyoto-kobe.com/wp-content/uploads/2025/03/11095148/umeda1.jpg", detail: { about: "yodobashiã€uniqloã€3coinsã€ABC martã€æ¿æ€¥æ¢…ç”°" }},
				{ t: "11:00", d: "GARIGUETTE Osaka æ¢…ç”°", m: "ç¾é£Ÿ", r: "æ—¥æœ¬è¶…äººæ°£çš„æ³•å¼åƒå±¤é…¥å°ˆè³£åº—", map: "https://maps.app.goo.gl/JHBZPQPHBfW8qqUh6", img: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2d/4e/8a/68/caption.jpg", detail: { about: "ä»¥ç¨ç‰¹çš„å”±ç‰‡é€ å‹ã€ç¾å ´è£½ä½œã€é…¥è„†æ´¾çš®å’Œè±å¯Œé¤¡æ–™èåï¼Œä½¿ç”¨åŒ—æµ·é“ç›´é€å¥¶æ²¹å’Œç‰›å¥¶ï¼Œä¸¦æä¾›è‰è“ã€è‘¡è„ã€ç™½æ¡ƒç­‰å­£ç¯€é™å®šå£å‘³ï¼Œå¯é¸ã€Œä¸€åŠä¸€åŠã€ä¸€æ¬¡å“åšå…©ç¨®å£å‘³ã€‚ ã€‚" }},
				{ t: "12:30", d: "å‡ºç™¼å‰å¾€è²´èˆ¹", m: "äº¤é€š", r: "æŠŠè³¼è²·å¾Œå•†å“æ”¾å›é£¯åº—æº–å‚™å‰å¾€è²´èˆ¹ç¥ç¤¾", map: "https://maps.app.goo.gl/SvgWXSoRWSZLfkha9", img: "https://img.enjoy-osaka-kyoto-kobe.com/wp-content/uploads/2025/03/11095148/umeda1.jpg", detail: { about: "å¤§é˜ªç’°ç‹€ç·š(å¤§å’Œè·¯å¿«é€Ÿé›»è»Š å¤©ç‹å¯º)3ç«™/7åˆ†é˜ï¼Œèµ·è¨–ç«™ï¼šå¤§é˜ªè»Šç«™>äº¬æ©‹ï¼ˆå¤§é˜ª)<br/>äº¬é˜ªæœ¬ç·š(ç‰¹æ€¥å‡ºç”ºæŸ³)8ç«™/46åˆ†é˜ï¼Œèµ·è¨–ç«™ï¼šäº¬æ©‹ï¼ˆå¤§é˜ª)>å‡ºç”ºæŸ³<br/>å¡å±±é›»éµæœ¬ç·š(æ™®é€šéé¦¬)13ç«™/28åˆ†é˜ï¼Œèµ·è¨–ç«™ï¼šå‡ºç”ºæŸ³>è²´èˆ¹å£<br/>ï¼“ï¼“å·´å£«(è²´èˆ¹ç¥ç¤¾ è²´èˆ¹)3ç«™/4åˆ†é˜ï¼Œèµ·è¨–ç«™ï¼šå¡é›»è²´èˆ¹å£é§…å‰>è²´èˆ¹" }},
				{ t: "14:40", d: "â›©ï¸ è²´èˆ¹ç¥ç¤¾", m: "æ™¯é»", r: "ç‡ˆç± çŸ³éšèˆ‡æ°´å åœ", map: "https://maps.app.goo.gl/SvgWXSoRWSZLfkha9", img: "https://image1.gamme.com.tw/news2/2014/77/20/p6CWnp_ak6KX.jpg", detail: { about: "è²´èˆ¹ç¥ç¤¾æœ€è‘—åçš„æ™¯è‰²è«éæ–¼å‰å¾€æœ¬å®®çš„çŸ³éšåƒé“ã€‚å…©å´æ•´é½Šæ’åˆ—çš„æœ±ç´…ç‡ˆç± ï¼Œèˆ‡çŸ³éšã€æ¨¹å½±ã€å››å­£é¢¨æ™¯äº¤ç¹”æˆå¤¢å¹»ç•«é¢ã€‚æ˜¥æœ‰æ–°ç¶ ã€å¤æœ‰æºªé¢¨ã€ç§‹æœ‰ç´…è‘‰ã€å†¬å‰‡è¦†é›ªå¦‚è©©ï¼Œæ¯ä¸€å­£éƒ½å¸å¼•æ”å½±æ„›å¥½è€…é€ è¨ªã€‚å¤œé–“é»ç‡ˆæ™‚ï¼Œæ›´æ•£ç™¼ç¥ç§˜æµªæ¼«çš„æ°›åœã€‚", buy: "â€¢ æ°´å åœï¼ˆã¿ãšã¿ãã˜ï¼‰ï¼šæŠŠç±¤æ”¾æ°´ä¸­æ‰æœƒé¡¯å­—ï¼Œåœ¨æœ¬å®®å¯ä»¥é«”é©—ï¼Œæ¯æ¬¡300æ—¥åœ“<br/>â€¢ ç¥ˆæ±‚ï¼šå§»ç·£ã€è‰¯ç·£ã€äº‹æ¥­é‹<br/>â€¢ é è¨ˆ16:30é»ç‡ˆ" }},
                { t: "17:30", d: "é£¯åº—ï¼šHotel Hankyu RESPIRE OSAKA", m: "äº¤é€š", r: "å›åˆ°å¤§é˜ªæº–å‚™åƒæ™šé¤", map: "https://maps.app.goo.gl/2T1TyQL7fXr3VW866", img: "https://img.enjoy-osaka-kyoto-kobe.com/wp-content/uploads/2025/03/11095148/umeda1.jpg", detail: { about: "ï¼“ï¼“å·´å£«(è²´èˆ¹å£ç«™å‰)4ç«™/4åˆ†é˜ï¼Œèµ·è¨–ç«™ï¼šè²´èˆ¹>å¡é›»è²´èˆ¹å£é§…å‰<br/>ï¼•ï¼’å·´å£«(åœ‹éš›æœƒé¤¨ç«™å‰(å¸‚åŸãƒ»å·å³¶ç¹”ç‰©ãƒ»åœ°çƒç ”å‰ãƒ»åŒ—ç¨œé«˜ä¸­å‰))18ç«™/26åˆ†é˜ï¼Œèµ·è¨–ç«™ï¼šè²´èˆ¹å£>åœ‹éš›æœƒé¤¨ç«™å‰<br/>çƒä¸¸ç·š(æ™®é€šæ–°ç”°é‚Š)8ç«™/16åˆ†é˜ï¼Œèµ·è¨–ç«™ï¼šåœ‹éš›æœƒé¤¨>å››æ¢ï¼ˆäº¬éƒ½å¸‚ç‡Ÿï¼‰<br/>é˜ªæ€¥äº¬éƒ½ç·š(æº–ç‰¹æ€¥å¤§é˜ªæ¢…ç”°ï¼ˆé˜ªæ€¥ï¼‰)9ç«™/46åˆ†é˜ï¼Œèµ·è¨–ç«™ï¼šçƒä¸¸>å¤§é˜ªæ¢…ç”°ï¼ˆé˜ªæ€¥ï¼‰" }},
				{ t: "20:30", d: "ğŸ¥© æ™šé¤ï¼šç‡’è‚‰åŠ›ä¸¸ æ¢…ç”°æ±é€šã‚Šåº—", m: "ç¾é£Ÿ", r: "å¤§é˜ªäººæ°£æ”¾é¡Œç‡’è‚‰", map: "https://maps.app.goo.gl/YdqmuB15HzPWNuqMA", img: "https://auntie.tw/wp-content/uploads/2024/05/20241002wirn2.jpg", detail: { about: "å·²é ç´„20:30ï¼Œå¯æŸ¥è©¢ä¿¡ä»¶ï¼šã€ç‡’è‚‰åŠ›ä¸¸ æ±é€šåº—ã€‘æ„Ÿè¬æ‚¨çš„é ç´„ã€‚", buy: "â€¢ é¹½è”¥ç‰›èˆŒ<br/>â€¢ å’Œç‰›è‚©èƒ›<br/>â€¢ çƒ¤è’œç‰‡ï¼‹ç™½é£¯ï¼ˆéš±è—ç‹è€…ï¼‰" }}
            ]},
            4: { city: "Hyogo", coords: {lat: 34.81, lon: 134.69}, items: [
                { t: "08:00", d: "å‡ºç™¼å‹å°¾å¯º", m: "äº¤é€š", r: "åƒå®Œé£¯åº—æ—©é¤å‡ºç™¼å‰å¾€å‹å°¾å¯º", map: "https://maps.app.goo.gl/vzR71T8C9Q4hvF2B9", img: "https://img.enjoy-osaka-kyoto-kobe.com/wp-content/uploads/2025/03/11095148/umeda1.jpg", detail: { about: "æ­ä¹˜åœ°éµå¾¡å ‚ç­‹ç·šè‡³ã€Œç®•é¢è±é‡ç«™ã€ï¼Œè½‰ä¹˜é˜ªæ€¥å·´å£«ï¼ˆ30è·¯ç‰¹æ€¥ï¼‰ç›´é”æˆ–æ”¹æ­ä¹˜è¨ˆç¨‹è»Š<br/><a href='https://japantravel.navitime.com/zh-tw/area/jp/depArrTimeList/00348506/00152123/00037701?' target='_blank' style='color:#2563eb;text-decoration:underline;'>å·´å£«æ™‚åˆ»è¡¨</a>", buy: "å·´å£«800æ—¥åœ“/äººï¼Œè¨ˆç¨‹è»Š2700æ—¥åœ“ä¸€å°"}},
				{ t: "09:30", d: "ğŸ”´ å‹å°¾å¯º", m: "æ™¯é»", r: "ä»¥ç¥ˆæ±‚ã€Œå‹é‹ã€ï¼ˆç‰¹åˆ¥æ˜¯æˆ°å‹è‡ªå·±ã€è€ƒè©¦åˆæ ¼ã€äº‹æ¥­æˆåŠŸï¼‰èå", map: "https://maps.app.goo.gl/vzR71T8C9Q4hvF2B9", img: "https://assets.funliday.com/posts/wp-content/uploads/2024/08/21002126/mv01-1024x518.jpg", detail: { about: "ã€Œå‹å°¾å¯ºã€èˆ‡å‹åˆ©é”æ‘©ï¼š å¤æ™‚å› æ²»ç™’å¤©çš‡ç—…ç—›è¢«è³œåã€Œæ³•åŠ›å‹éç‹è€…ä¹‹å¯ºã€ï¼Œç°¡ç¨±å‹ç‹å¯ºï¼Œå¾Œè½‰ç‚ºå‹å°¾å¯ºã€‚å¯ºå…§æ»¿æ˜¯ä¿¡å¾’ç¥ˆæ±‚å¾Œç•™ä¸‹çš„ã€Œé”æ‘©ä¸å€’ç¿ã€ï¼Œç´…è‰²é”æ‘©éš±è—åœ¨çŸ³éšã€å±‹ç°·ã€æ¨¹æ ¹é–“ï¼Œå½¢æˆç¨ç‰¹æ™¯è§€ã€‚<br/>é”æ‘©ç¥ç±¤ï¼š åƒæ‹œè€…å¯è³¼è²·å°çš„é”æ‘©ä¸å€’ç¿ï¼Œå¯«ä¸‹å¿ƒé¡˜ï¼Œä¸¦åœ¨é”æˆå¾Œå›åˆ°å¯ºä¸­å¥‰ç´ï¼Œé€™ä½¿å¾—å¯ºå…§éš¨è™•å¯è¦‹å¯«ä¸Šé¡˜æœ›çš„ç´…è‰²é”æ‘©ã€‚<br/>é–€ç¥¨ï¼š 500æ—¥åœ“<a href='https://www.asoview.com/item/ticket/ticket0000039224/' target='_blank' style='color:#2563eb;text-decoration:underline;'>è³¼ç¥¨é€£çµ</a>ã€‚", buy: "â— é›†ç« æ˜ä¿¡ç‰‡ï¼š åœ’å€å…§æœ‰6å€‹é›†ç« é»ï¼Œé›†æ»¿å¯ç²å¾—å®Œæ•´é”æ‘©åœ–æ¡ˆæ˜ä¿¡ç‰‡ã€‚<br/>â— é”æ‘©é›è›‹ç³•ï¼šå‹å°¾å¯ºå…¥å£/å‡ºå£è™•çš„è²©è³£æ”¤ä½ã€‚<br/>â— é”æ‘©è»Ÿç³–(å‘³è¦ºç³–)ï¼šå¤–è¡¨ç‚ºç´…è‰²é”æ‘©åŒ…è£ï¼Œå°è¢‹æ–¹ä¾¿é€ç¦®ã€‚<br/>â— èœ‚èœœå¥¶æ²¹ä¹³é…ªå¤¾å¿ƒé¤…ä¹¾ï¼š å‹å°¾å¯ºåŸå‰µï¼Œå£æ„Ÿé…¥è„†ã€‚" }},
                { t: "11:00", d: "å‰å¾€å§¬è·¯åŸ", m: "äº¤é€š", r: "å¾å‹å°¾å¯ºå‰å¾€å§¬è·¯åŸ", map: "https://maps.app.goo.gl/2T1TyQL7fXr3VW866", img: "https://assets.funliday.com/posts/wp-content/uploads/2024/08/21002126/mv01-1024x518.jpg", detail: { about: "æ­ä¹˜å·´å£«å›åˆ°[ç®•é¢è±é‡ç«™]ï¼Œå†æ­ä¹˜åœ°éµåˆ°æ–°å¤§é˜ªç«™ï¼Œæ›ä¹˜JRæ–°å¹¹ç·šã€ŒNozomi 65ã€", buy: "æ–°å¹¹ç·šé–€ç¥¨éœ€åˆ°çª—å£è³¼è²·ï¼Œæˆ–ç¶²ç«™å…ˆè²·(klook)" }},
				{ t: "13:35", d: "ğŸ¯ å§¬è·¯åŸ", m: "æ™¯é»", r: "æ—¥æœ¬é¦–æ‰¹ä¸–ç•Œæ–‡åŒ–éºç”¢ã€åœ‹å¯¶åŠã€Œæ—¥æœ¬100ååŸã€ä¹‹ä¸€", map: "https://maps.app.goo.gl/AfGV7viaSPbmvUDc8", img: "https://pt-tour.tw/wp-content/uploads/2016/11/img_1.jpeg", detail: { about: "â€¢ èˆ‡ç†Šæœ¬åŸã€æ¾æœ¬åŸåˆç¨±ã€Œæ—¥æœ¬ä¸‰å¤§ååŸã€<br/>â€¢ é–€ç¥¨ï¼š1000æ—¥åœ“<br/>å…«æ–¹çš†æ­£é¢ï¼š å¾ä¸åŒè§’åº¦çœ‹ï¼Œå§¬è·¯åŸéƒ½å±•ç¾å‡ºå®Œç¾çš„é›„å‰å§¿æ…‹ã€‚", buy: "â€¢ å§¬è·¯åŸç™½è‰²å¸ƒä¸ã—ã‚ãƒ—ãƒªãƒ³<br/>â€¢ å§¬è·¯é—œæ±ç…®<br/>â€¢ ç¥æˆ¶ç‰›<br/>â€¢ Cafe de Mucheæä»åå¸" }},
				{ t: "16:00", d: "é£¯åº—ï¼šHotel Hankyu RESPIRE OSAKA", m: "äº¤é€š", r: "å›åˆ°å¤§é˜ªæº–å‚™åƒæ™šé¤", map: "https://maps.app.goo.gl/2T1TyQL7fXr3VW866", img: "https://img.enjoy-osaka-kyoto-kobe.com/wp-content/uploads/2025/03/11095148/umeda1.jpg", detail: { about: "æ­ä¹˜JR æ±æµ·é“ã€å±±é™½æœ¬ç·š(æ–°å¿«é€Ÿç±³åŸ ç¶“ç”± æ•¦è³€)ï¼Œå¤§é˜ªè»Šç«™ä¸‹è»Š" }}
            ]},
            5: { city: "Osaka", coords: {lat: 34.69, lon: 135.50}, items: [
                { t: "08:00", d: "ğŸš æ©Ÿå ´æ¥é€", m: "äº¤é€š", r: "æ­æ¥é€å‰å¾€é—œè¥¿æ©Ÿå ´", img: "https://img.enjoy-osaka-kyoto-kobe.com/wp-content/uploads/2025/03/11095148/umeda1.jpg", detail: { about: "å·²é ç´„KKDAYæ©Ÿå ´æ¥é€(è¨‚å–®ç·¨è™Ÿï¼š25KK257470767)ï¼Œå‰å…©å¤©è¨˜å¾—èˆ‡å®¢æœç¢ºèªå¸æ©Ÿè¯ç¹«æ–¹å¼!" }},
				{ t: "09:20", d: "æ˜Ÿå®‡èˆªç©º JX821 èµ·é£›", m: "äº¤é€š", r: "é£›å¾€æ¡ƒåœ’æ©Ÿå ´ (TPE)", img: "https://hoshinoresorts.com/jp/guide/wp-content/uploads/2025/06/KIX_5_TB.jpg", detail: { about: "æ˜Ÿå®‡èˆªç©ºæ«ƒå°å®Œæˆå ±åˆ°å¾Œï¼Œå‡ºå¢ƒå®‰æª¢ï¼Œå‰å¾€ä¸‰æ¨“æ˜Ÿå®‡èˆªç©º(KIX Lounge Kansai)è²´è³“å®¤<br/>JCBé…åˆè²´è³“å®¤<a href='https://www.kansai-airport.or.jp/tw/service/lounge/credit-card' target='_blank' style='color:#2563eb;text-decoration:underline;'>è³¼ç¥¨é€£çµ</a>" }}
            ]}
        };

        let shops = JSON.parse(localStorage.getItem('tr_shop_v13')) || [];
        let exps = JSON.parse(localStorage.getItem('tr_exp_v13')) || [];
        let currentFilter = 'All';
        let tempImg = null;

        async function initData() {
            showDay(1); renderShop(); renderLedger();
            document.getElementById('loading-overlay').classList.add('hidden');
            if (GAS_URL.startsWith("https")) {
                try {
                    const r = await fetch(GAS_URL, { signal: AbortSignal.timeout(6000) });
                    const c = await r.json();
                    if (c.shops) { shops = c.shops; localStorage.setItem('tr_shop_v13', JSON.stringify(shops)); renderShop(); }
                    if (c.exps) { exps = c.exps; localStorage.setItem('tr_exp_v13', JSON.stringify(exps)); renderLedger(); }
                } catch(e) { console.warn("Sync failed"); }
            }
        }

        async function fetchWeather(day) {
            try {
                const c = travelData[day].coords;
                const r = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${c.lat}&longitude=${c.lon}&hourly=temperature_2m,weathercode&timezone=Asia%2FTokyo&forecast_days=1`);
                const d = await r.json();
                document.getElementById('hourly-weather').innerHTML = d.hourly.temperature_2m.slice(0, 24).map((t, i) => `
                    <div class="weather-hour text-center">
                        <div class="text-[8px] text-gray-400 mb-1">${String(i).padStart(2, '0')}:00</div>
                        <div class="text-sm mb-1">${d.hourly.weathercode[i] <= 3 ? 'â˜€ï¸' : 'â˜ï¸'}</div>
                        <div class="text-[10px] font-bold serif">${Math.round(t)}Â°</div>
                    </div>`).join('');
            } catch(e) {}
        }

        function showDay(day) {
            const data = travelData[day];
            fetchWeather(day);
            let h = '<div class="timeline-line"></div>';
            data.items.forEach((it, idx) => {
                h += `<div class="timeline-item" onclick="openDetail(${day}, ${idx})">
                        <div class="time-side serif">${it.t.split(':')[0]}<span class="text-[10px] text-gray-300">Â°</span></div>
                        <div class="content-side">
                            <div class="text-[9px] font-bold text-gray-300 uppercase mb-1">${it.m}</div>
                            <h4 class="text-lg font-bold flex justify-between items-center">${it.d} <i class="fas fa-location-arrow text-[10px] text-red-500 opacity-20"></i></h4>
                            <p class="text-sm text-gray-400 truncate">${it.r || ''}</p>
                        </div>
                    </div>`;
            });
            document.getElementById('day-content').innerHTML = h;
            document.querySelectorAll('.day-btn').forEach((b, i) => b.classList.toggle('active', i+1===day));
        }

        function openDetail(day, idx) {
            const it = travelData[day].items[idx];
            const detail = it.detail || {};
            document.getElementById('modal-image').style.backgroundImage = `url('${it.img}')`;
            document.getElementById('modal-body').innerHTML = `
                <div class="flex items-center gap-2"><span class="text-[10px] bg-black text-white px-2 py-1 font-bold uppercase">${it.m}</span><span class="text-sm serif font-bold text-gray-300">${it.t}</span></div>
                <h2 class="text-2xl font-bold serif leading-tight">${it.d}</h2>
                <p class="text-base text-gray-600">${detail.about || it.r || ''}</p>
                ${detail.buy ? `<div class="p-4 bg-orange-50 border-l-4 border-orange-300 rounded-r-xl"><h5 class="text-[10px] font-bold text-orange-600 uppercase mb-1 tracking-widest">Recommended</h5><p class="text-base text-orange-900 font-medium">${detail.buy}</p></div>` : ''}
                <button onclick="navigate('${it.d}')" class="w-full bg-black text-white py-4 rounded-2xl font-bold uppercase tracking-widest mt-6">Open Map</button>`;
            document.getElementById('infoModal').style.display = 'block';
        }

        function renderShop() {
            const locs = ['All', ...new Set(shops.map(s => s.loc || 'æœªå®š'))];
            document.getElementById('shop-filter-bar').innerHTML = locs.map(l => `<button onclick="setFilter('${l}')" class="text-[10px] px-4 py-1.5 rounded-full border ${currentFilter === l ? 'bg-black text-white' : 'bg-white text-gray-400'}">${l}</button>`).join('');
            const filtered = currentFilter === 'All' ? shops : shops.filter(s => s.loc === currentFilter);
            document.getElementById('shopping-list').innerHTML = `<div class="grid grid-cols-2 gap-3">` + filtered.map(s => {
                let img = s.img || ''; if (img && !img.startsWith('data:')) img = 'data:image/jpeg;base64,' + img;
                return `<div class="bg-white p-3 rounded-2xl border flex flex-col gap-2 ${s.purchased ? 'purchased-item' : ''}">
                    <div class="w-full h-36 bg-gray-50 rounded-xl bg-cover bg-center flex-shrink-0" style="background-image:url('${img}')" onclick="viewImg('${img}')"></div>
                    <div class="p-1 flex-1 flex flex-col">
                        <b class="text-sm leading-snug">${s.name}</b>
                        <div class="text-xs text-gray-600 font-medium mt-1">${s.spec || ''} | Qty:${s.qty || 1}</div>
                        <div class="flex flex-wrap gap-1 mt-2">
                            <span class="bg-indigo-50 text-indigo-500 text-[9px] px-1.5 py-0.5 rounded font-bold tracking-tighter">${s.loc || 'æœªå®š'}</span>
                            <span class="bg-gray-100 text-gray-400 text-[9px] px-1.5 py-0.5 rounded font-bold tracking-tighter">${s.purchaser || 'æˆ‘'}</span>
                        </div>
                        ${s.remark ? `<div class="text-[10px] text-gray-400 mt-2 italic border-l-2 pl-2">${s.remark}</div>` : ''}
                        <div class="mt-4 border-t pt-2">
                           <div class="flex items-center justify-between">
                              <label class="text-[10px] font-bold text-gray-400 uppercase"><input type="checkbox" ${s.purchased ? 'checked' : ''} onchange="toggleShop(${s.id})" class="accent-indigo-900 mr-1">Bought</label>
                              <button onclick="delShop(${s.id})" class="text-gray-200">âœ•</button>
                           </div>
                           <div class="text-sm font-bold text-red-600 mt-1">Â¥<input type="number" value="${s.price || ''}" onblur="updateShopPrice(${s.id}, this.value)" class="w-16 border-b text-right outline-none bg-transparent"></div>
                        </div>
                    </div>
                </div>`;
            }).join('') + `</div>`;
        }

        function addShoppingItem() {
            const name = document.getElementById('shop-name').value; if(!name) return;
            const it = { id: Date.now(), name, spec: document.getElementById('shop-spec').value, qty: document.getElementById('shop-qty').value, loc: document.getElementById('shop-loc').value, purchaser: document.getElementById('shop-purchaser').value, remark: document.getElementById('shop-remark').value, img: tempImg, purchased: false, price: "" };
            shops.unshift(it); localStorage.setItem('tr_shop_v13', JSON.stringify(shops));
            renderShop(); syncToSheets("shop", it); document.getElementById('shop-name').value = ''; document.getElementById('shop-remark').value = ''; tempImg = null; document.getElementById('shop-img-status').innerText = "ä¸Šå‚³ç…§ç‰‡";
        }

        function toggleShop(id) { const i = shops.findIndex(s => s.id === id); shops[i].purchased = !shops[i].purchased; localStorage.setItem('tr_shop_v13', JSON.stringify(shops)); renderShop(); syncToSheets("shop", shops[i]); }
        function updateShopPrice(id, p) { const i = shops.findIndex(s => s.id === id); shops[i].price = p; localStorage.setItem('tr_shop_v13', JSON.stringify(shops)); syncToSheets("shop", shops[i]); }
        function delShop(id) { shops = shops.filter(s => s.id !== id); localStorage.setItem('tr_shop_v13', JSON.stringify(shops)); renderShop(); syncToSheets("del_shop", {id}); }
        function setFilter(l) { currentFilter = l; renderShop(); }

        function addExpense() {
            const n = document.getElementById('exp-name').value; const a = document.getElementById('exp-amount').value; if(!n || !a) return;
            const e = { id: Date.now(), name: n, amt: a, method: document.getElementById('exp-method').value, date: document.getElementById('exp-date').value };
            exps.unshift(e); localStorage.setItem('tr_exp_v13', JSON.stringify(exps)); renderLedger(); syncToSheets("exp", e);
            document.getElementById('exp-name').value = ''; document.getElementById('exp-amount').value = '';
        }
        function renderLedger() {
            let t = 0; document.getElementById('expense-list').innerHTML = exps.map(e => { t += Number(e.amt); return `<div class="bg-white p-4 border-b flex justify-between items-center text-sm"><div><b>${e.name}</b><div class="text-[10px] text-gray-400">${e.date} | ${e.method}</div></div><div class="flex gap-4 items-center"><b>Â¥${Number(e.amt).toLocaleString()}</b><button onclick="delExp(${e.id})" class="text-gray-200">âœ•</button></div></div>`; }).join('');
            document.querySelector('#total-amount span').innerText = t.toLocaleString();
        }
        function delExp(id) { exps = exps.filter(e => e.id !== id); localStorage.setItem('tr_exp_v13', JSON.stringify(exps)); renderLedger(); syncToSheets("del_exp", {id}); }

        function processImage(input) {
            const r = new FileReader(); r.onload = (e) => {
                const i = new Image(); i.onload = () => {
                    const c = document.createElement('canvas'); c.width = 400; c.height = (i.height/i.width)*400;
                    c.getContext('2d').drawImage(i, 0, 0, 400, c.height); tempImg = c.toDataURL('image/jpeg', 0.4);
                    document.getElementById('shop-img-status').innerText = "âœ… åœ–ç‰‡å·²å°±ç·’";
                }; i.src = e.target.result;
            }; r.readAsDataURL(input.files[0]);
        }

        async function syncToSheets(type, data) { if (GAS_URL.includes("https")) { let s = JSON.parse(JSON.stringify(data)); if (s.img && s.img.length > 40000) s.img = "Img Over"; fetch(GAS_URL, { method: "POST", mode: 'no-cors', body: JSON.stringify({ type, data: s }) }); } }
        function switchTab(t) { document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active')); document.getElementById(t).classList.add('active'); document.querySelectorAll('.nav-btn').forEach(b => b.classList.add('text-gray-300')); event.currentTarget.classList.remove('text-gray-300'); }
        function closeModal() { document.getElementById('infoModal').style.display = 'none'; }
        function navigate(l) { window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(l)}`, '_blank'); }
        function viewImg(s) { if(!s) return; const w = window.open(""); w.document.write(`<body style="margin:0;background:#000;display:flex;align-items:center;justify-content:center;"><img src="${s}" style="max-width:100%;height:auto;"></body>`); }
        
        window.onload = initData;
        document.getElementById('exp-date').valueAsDate = new Date();
    </script>
</body>
</html>